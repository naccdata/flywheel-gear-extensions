file(name="manifest", source="manifest.json")

docker_image(name="${IMAGENAME}",
             source="Dockerfile",
             dependencies=[":manifest", "${DIRNAME}/src/python/${APPNAME}:bin"],
             image_tags=["${IMAGETAG}", "latest"])

experimental_run_shell_command(
    name="gear",
    command="fw-beta gear",
    description="run fw gear command for ${DIRNAME}",
    workdir="${DIRNAME}/src/docker")

experimental_run_shell_command(
    name="validate",
    command="fw-beta gear --validate manifest.json",
    description="validate gear manifest for ${DIRNAME}",
    workdir="${DIRNAME}/src/docker")